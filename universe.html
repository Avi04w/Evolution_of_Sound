<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Music Universe - Interactive Visualization</title>
    <link rel="stylesheet" href="css/universe_demo.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
</head>
<body>
<div id="main-viz-container">
    <div id="canvas-container"></div>
    <button id="reset-view">üè† Reset View</button>
    <div id="content-wrapper">
    <!-- Page 1: Introduction -->
    <div class="page">
        <div class="content-box">
            <h1>Universe of Hits</h1>
            <p>
                Explore 15,000+ songs visualized in 3D space using Principal Component Analysis (PCA) 
                of audio features from Spotify.
            </p>
            <p>
                Each point represents a song, positioned based on its acoustic properties like energy, 
                danceability, and valence. Similar songs cluster together, revealing hidden patterns in music.
            </p>
            <p><strong>Interactions:</strong></p>
            <ul>
                <li>Click and drag to rotate</li>
                <li>Cmd/Ctrl + Scroll to zoom</li>
                <li>Hover over points for details</li>
            </ul>
        </div>
    </div>

    <!-- Page 2: Controls -->
    <div class="page">
        <div class="content-box">
            <h2>Filters & Controls</h2>
            
            <div class="control-section">
                <label for="color-feature">Color By</label>
                <select id="color-feature" class="placeholder-active">
                    <option value="" selected disabled>Select an audio feature...</option>
                    <option value="danceability">Danceability</option>
                    <option value="energy">Energy</option>
                    <option value="loudness">Loudness</option>
                    <option value="speechiness">Speechiness</option>
                    <option value="acousticness">Acousticness</option>
                    <option value="instrumentalness">Instrumentalness</option>
                    <option value="valence">Valence</option>
                    <option value="tempo">Tempo</option>
                </select>
            </div>

            <div class="control-section">
                <label for="genre-filter">Filter by Genre</label>
                <div class="input-wrapper">
                    <input type="text" id="genre-filter" placeholder="Search genres..." autocomplete="off">
                    <div id="genre-suggestions"></div>
                </div>
                <button id="clear-genre" class="hidden">Clear Filter</button>
            </div>
        </div>
    </div>

    <!-- Page 2.5: PCA Loading Vectors -->
    <div class="page" id="pca-loadings-section">
        <div class="content-box">
            <h2>Understanding the Space: PCA Loading Vectors</h2>
            <p>
                You may have noticed that certain audio features seem to increase in specific directions. 
                These are the <strong>PCA loading vectors</strong>‚Äîarrows showing how each musical characteristic 
                maps onto our 3D space.
            </p>
            <p>
                For example, if you color by "Energy" and enable the loading vectors below, you'll see 
                the energy arrow pointing in the direction where songs become more energetic.
            </p>
            <p>
                Feel free to scroll back up and verify!
            </p>
            
            <div class="control-section">
                <label>
                    <input type="checkbox" id="show-loadings">
                    Show Loading Vectors
                </label>
            </div>
        </div>
    </div>

    <!-- Page 3: Billboard Charts -->
    <div class="page">
        <div class="content-box">
            <h2>Billboard Hot 100</h2>
            <p>
                <!-- Explore how hit songs are distributed in the music universe. Use the timeline to 
                travel through time and see a rolling 1-year window of chart data - each point shows 
                all songs that charted in the following year, colored by their peak ranking. -->
                Use the timeline below to travel through the years and see how popular music trends evolve.
                Each highlighted point represents a song that made it to the Billboard Hot 100 chart in a given timeframe.
            </p>
            
            <div class="control-section">
                <label for="billboard-timeline">Timeline</label>
                <div id="timeline-container">
                    <div id="timeline-track"></div>
                    <div id="timeline-ticks"></div>
                    <div id="timeline-slider"></div>
                    <div id="timeline-labels"></div>
                </div>
                <div id="timeline-year-display">
                    <div class="date-range">No year selected</div>
                </div>
                <div class="button-group">
                    <button id="play-timeline" class="button-flex">‚ñ∂ Play</button>
                    <button id="clear-billboard" class="button-flex" disabled>Clear Billboard</button>
                </div>
                <div class="speed-control">
                    <label for="playback-speed">Speed:</label>
                    <div class="speed-buttons">
                        <button class="speed-btn" data-speed="0.5">0.5√ó</button>
                        <button class="speed-btn active" data-speed="1">1√ó</button>
                        <button class="speed-btn" data-speed="2">2√ó</button>
                        <button class="speed-btn" data-speed="5">5√ó</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    
    <div id="scroll-hint">‚Üì Scroll to explore ‚Üì</div>
    
    <!-- Page indicator dots -->
    <div id="page-indicator">
        <div class="page-dot active" data-page="0"></div>
        <div class="page-dot" data-page="1"></div>
        <div class="page-dot" data-page="2"></div>
        <div class="page-dot" data-page="3"></div>
    </div>
</div>

<!-- Page 4: Additional Visualization (scrolls independently) -->
<!-- <div class="page">
    <div class="content-box fullscreen-content">
        <div class="centered-content">
            <h2>Additional Visualization</h2>
            <p>This is a placeholder area for another visualization or demo.</p>
            <img src="https://www.stockvault.net/data/2008/03/09/104660/thumb16.jpg" 
                 alt="Placeholder visualization" 
                 class="placeholder-image">
        </div>
    </div>
</div>

<div class="page">
    <div class="content-box fullscreen-content">
        <div class="centered-content">
            <h2>Additional Visualization 2</h2>
            <p>This is a placeholder area for another visualization or demo.</p>
            <img src="https://www.stockvault.net/data/2008/03/09/104660/thumb16.jpg" 
                 alt="Placeholder visualization" 
                 class="placeholder-image">
        </div>
    </div>
</div> -->

<script type="module" src="js/vis_universe.js"></script>
<script src="js/page_navigation.js"></script>

</body>
</html>
