<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Geographical Music Explorer</title>
  <link rel="stylesheet" href="css/geographical.css" />
</head>

<body>
  <div class="app">
    <header class="app__header">
      <h1 class="app__title">Geographical Music Explorer</h1>
      <p class="app__subtitle">
        Step 4/4 — Timeline playback, fading world map, and weekly Top 10.
      </p>
    </header>

    <section class="timeline" aria-label="Timeline controls">
      <div class="timeline__label" id="timelineLabel">
        Preparing timeline…
      </div>
      <div class="timeline__controls">
        <button type="button" class="timeline__button" data-action="toggle-play" id="playPauseBtn">
          Play
        </button>
        <button type="button" class="timeline__button" data-action="prev-year" id="prevYearBtn">
          Prev Year
        </button>
        <button type="button" class="timeline__button" data-action="next-year" id="nextYearBtn">
          Next Year
        </button>
      </div>
      <div class="timeline__selectors">
        <label class="timeline__selector" for="startYearSelect">
          <span>Start year</span>
          <select id="startYearSelect" class="timeline__select">
            <option value="" disabled selected>Loading…</option>
          </select>
        </label>
        <label class="timeline__selector" for="endYearSelect">
          <span>End year</span>
          <select id="endYearSelect" class="timeline__select">
            <option value="" disabled selected>Loading…</option>
          </select>
        </label>
        <label class="timeline__selector" for="speedSelect">
          <span>Speed</span>
          <select id="speedSelect" class="timeline__select">
            <!-- <option value="100">Fast (100ms)</option> -->
            <option value="200">Fast (200ms)</option>
            <option value="400">Normal (400ms)</option>
            <option value="800">Slow (800ms)</option>
          </select>
        </label>
      </div>
      <input type="range" class="timeline__scrubber" id="weekSlider" min="0" max="0" value="0" step="1"
        aria-label="Week selector" />
    </section>

    <section class="map-section" aria-live="polite">
      <div class="map-container" id="mapContainer">
        <svg id="worldMap" role="img" aria-label="World map with top tracks">
          <!-- Map paths and pins injected via D3 -->
        </svg>
        <div class="map-legend" id="mapLegend" aria-hidden="true"></div>
        <div class="map-tooltip" id="mapTooltip" hidden></div>
      </div>
      <!-- TODO Step 4: Enable map zoom/pan for deeper exploration -->
    </section>

    <section class="tracks-section" aria-live="polite">
      <div class="tracks-section__header">
        <h2 class="tracks-section__title" id="tracksTitle">
          Top 10 this week
        </h2>
        <p class="tracks-section__note" id="tracksNote" hidden></p>
      </div>
      <div class="tracks-table-wrapper">
        <table class="tracks-table" aria-describedby="tracksTitle">
          <thead>
            <tr>
              <th scope="col">Rank</th>
              <th scope="col">Track</th>
              <th scope="col">Artists</th>
              <th scope="col">Genre</th>
            </tr>
          </thead>
          <tbody id="topTracksBody">
            <tr>
              <td colspan="4" class="tracks-table__placeholder">
                Loading weekly rankings…
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- TODO Step 3: Surface track details, filters, and summary metrics -->
      <!-- TODO Step 4: Clicking a track row will highlight and center the map pin. -->
    </section>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script src="https://cdn.jsdelivr.net/npm/topojson-client@3"></script>
  <script src="js/geographical.js"></script>
</body>

</html>